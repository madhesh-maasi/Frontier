{"version":3,"file":"MinifierWorker.js","sourceRoot":"","sources":["../../src/workerPool/MinifierWorker.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAE3D,iEAA8D;AAE9D,mDAAwD;AAGxD,MAAM,aAAa,GAAkB,2BAAU,CAAC;AAEhD,yDAAyD;AACzD,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;AAErB,2BAAW,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,OAAmC,EAAE,EAAE;IACtE,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACjB;IAED,MAAM,MAAM,GAA8B,MAAM,IAAA,mCAAgB,EAAC,OAAO,EAAE,aAAa,CAAC,CAAC;IAEzF,2BAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { minifySingleFile } from '../terser/MinifySingleFile';\nimport { MinifyOptions } from 'terser';\nimport { parentPort, workerData } from 'worker_threads';\nimport { IModuleMinificationRequest, IModuleMinificationResult } from '../ModuleMinifierPlugin.types';\n\nconst terserOptions: MinifyOptions = workerData;\n\n// Set to non-zero to help debug unexpected graceful exit\nprocess.exitCode = 2;\n\nparentPort!.on('message', async (message: IModuleMinificationRequest) => {\n  if (!message) {\n    process.exit(0);\n  }\n\n  const result: IModuleMinificationResult = await minifySingleFile(message, terserOptions);\n\n  parentPort!.postMessage(result);\n});\n"]}